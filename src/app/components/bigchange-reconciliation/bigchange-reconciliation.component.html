<div class="shadow-lg p-3 mb-5 bg-body-tertiary rounded">
  <div class="wrapper p-3">
    <h3 class="mb-2">BigChange Reconciliation</h3>
    <!-- <p>Welcome to the yard processing page!</p> -->

    <div class="row table-responsive">
      <div class="row mb-3">
        <div class="col-md-12">
          <label for="txtDriverName" class="form-label"
            >Enter Driver Name</label
          >
          <input
            type="email"
            class="form-control"
            id="txtDriverName"
            [(ngModel)]="filterText"
            placeholder="Filter by driver name"
          />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4">
            <button type="button" 
          (click)="getCompletedWeightedJobs()" 
          class="btn btn-success mt-2"
        >
          Refresh
        </button>
        </div>
      </div>
      <ng-container *ngIf="weightedJobs.length > 0">
        <table class="table table-striped" style="width: 100%" >
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Driver</th>
                <th scope="col">Vehicle</th>
                <th scope="col">Ref. No</th>
                <!-- <th scope="col">Total Weight</th> -->
                <th scope="col">View</th>
                <!-- <th scope="col">Weight</th> -->
                <th scope="col">Action</th>
                <!-- <th scope="col">Further Processing</th> -->
              </tr>
            </thead>
            <tbody class="table-group-divider">
                <ng-container *ngFor="let job of weightedJobs; let i = index">
                    <tr>
                        <th scope="row" >{{ i + 1 }}</th>
                        <td>{{ job.resource }}</td>
                        <td>{{ job.asset }}</td>
                        <td>{{ job.jobReference }}</td>
                        <!-- <td> {{ job.totalWeight }} </td> -->
                        <td> 
                            <button class=" btn btn-sm btn-info" (click)="viewJobDetails(job)">
                                <i class="fa fa-eye"></i>
                            </button>
                            <!-- <button class=" btn btn-sm btn-info" *ngIf="viewDetails" (click)="hideJobDetails()">Hide Details</button> -->
                        
                        </td>
                        <td> <button class=" btn btn-sm btn-success" (click)="postToBigChange(job)" >Post
                            <i class="fa fa-folder"></i>
                        </button>
                    </td>
                    </tr>
                    <tr>
                        <td colspan="7" *ngIf="viewDetails && lastCheckJobId == job.jobId">
                            <table class="table table-striped table-hover table-bordered border-info b-0">
                                <thead>
                                    <tr>
                                      <th scope="col">#</th>
                                      <th scope="col">Description</th>
                                      <th scope="col">Weight</th>
                                      <!-- <th scope="col">Processed By</th> -->
                                    </tr>
                                </thead>
                                <tbody>
                                    <ng-container *ngFor="let job of weightedJobDetail; let i = index">
                                        <tr>
                                            <th scope="row" >{{ i + 1 }}</th>
                                            <td>{{ job.itemDescription }}</td>
                                            <td>{{ job.totalWeight }}</td>
                                        </tr>
                                    </ng-container>
                                    
                                </tbody>
                            </table>
                        </td>
                    </tr>
                </ng-container>
            </tbody>
            
          </table>
      </ng-container>
      
      
      <nav aria-label="Page navigation">
        <!-- <ul class="pagination justify-content-center">
            <li
              class="page-item"
              [class.disabled]="currentPage === 1"
              *ngIf="currentPage !== 1"
            >
              <a
                class="page-link btn btn-sm btn-outline-primary"
                (click)="goToPage(1)"
              >
                First
              </a>
            </li>
            <li class="page-item" [class.disabled]="currentPage === 1">
              <a
                class="page-link btn btn-sm btn-outline-primary mx-1"
                (click)="goToPage(currentPage - 1)"
                >{{ currentPage }}</a
              >
            </li>
            <li
              class="page-item"
              [class.disabled]="currentPage === getTotalPages()"
            >
              <a
                class="page-link btn btn-sm me-1 rounded btn-outline-primary"
                (click)="goToPage(currentPage + 1)"
                >{{ currentPage + 1 }}</a
              >
            </li>
            <li
              class="page-item"
              [class.disabled]="currentPage === getTotalPages()"
              *ngIf="currentPage !== getTotalPages()"
            >
              <a
                class="page-link btn btn-sm btn-outline-primary"
                (click)="goToPage(getTotalPages())"
                >Last</a
              >
            </li>
          </ul> -->
      </nav>
      <!-- End of wrapper -->
    </div>
  </div>
</div>
